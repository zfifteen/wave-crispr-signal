üß¨ WAVE-CRISPR PHYSICAL Z-METRICS IMPLEMENTATION DEMO
======================================================================
Complete implementation of the Wave-CRISPR experiment plan:
- Four sequence-derivable physical Z-metrics
- Z = A * (B / c) form with c = e¬≤ ‚âà 7.389
- Human DNA validation guardrails
- Œ∏‚Ä≤ geodesic integration at k* = 0.3
- Hypothesis testing framework (H1, H2)
- Bootstrap validation with confidence intervals
- CLI and Python API integration

üõ°Ô∏è  DEMO: Input Validation Guardrails
==================================================
‚úÖ Valid human sequence:
   Sequence: ATCGATCGATCGATCG
   Header: PCSK9_GRCh38_test
   Z-metrics calculated successfully!

‚ùå Invalid nucleotides (should fail):
   ‚úÖ Correctly rejected: Non-nucleotide or ambiguous input: {'X', 'Z', 'Y'}. Only A/C/G/T/N allowed.

üîß Rate clamping demonstration:
   All rates B ‚â• 0 enforced in Z = A * (B / c)
   Division guards prevent zero division

üß¨ DEMO: Four Physical Z-Metrics
==================================================

High GC (stable): GGGCCCGGGCCCGGGCCCGG
  1. Opening Kinetics Z:    0.002391
  2. Stacking Dissociation: 0.018606
  3. Twist Fluctuation:     0.000000
  4. Melting Kinetics:      0.011196
     Z-mean:                0.008048

Low GC (flexible): ATATATATATATATATAT
  1. Opening Kinetics Z:    0.000000
  2. Stacking Dissociation: 0.029665
  3. Twist Fluctuation:     0.011923
  4. Melting Kinetics:      0.008660
     Z-mean:                0.012562

Mixed composition: ATCGATCGATCGATCGATCG
  1. Opening Kinetics Z:    0.002059
  2. Stacking Dissociation: 0.022494
  3. Twist Fluctuation:     0.002236
  4. Melting Kinetics:      0.009670
     Z-mean:                0.009114

GC-rich repeats: GCGCGCGCGCGCGCGCGC
  1. Opening Kinetics Z:    0.000194
  2. Stacking Dissociation: 0.013594
  3. Twist Fluctuation:     0.000000
  4. Melting Kinetics:      0.013711
     Z-mean:                0.006875

‚ö° DEMO: Z Framework Form (Z = A * (B / c), c = e¬≤)
==================================================
Sequence: ATCGATCGATCGATCG
Physical constant c = e¬≤ = 7.389056

Opening Kinetics Z-metric breakdown:
  A (context factor):  0.265625
  B (opening rate):    0.057237
  c (invariant e¬≤):    7.389056
  Z = A * (B / c):     0.002058
  Verification:        0.002058 ‚úÖ

üåê DEMO: Œ∏‚Ä≤ Geodesic Integration (k* = 0.3)
==================================================
Test sequence: ATCGATCGATCGATCGATCG
Geodesic resolution parameter k* = 0.3

Geodesic features:
  Œ∏‚Ä≤(n,k) at position 10:    0.967866
  Weighted composition:      2.575957
  Geometric curvature:       1.480100

Feature bands:
  Physical Z-band score:     0.911
  Geodesic band score:       0.000
  Spectral band score:       0.689
  Invariant band score:      0.000
  Integrated score:          0.457

üî¨ DEMO: Hypothesis Testing Framework
==================================================
H1 Hypothesis: Lower Opening-Z correlates with higher CRISPR efficiency
H2 Hypothesis: Very low Stacking-Z sequences (framework)

üß¨ Calculating Z-metrics for all sequences...
üî¨ Validating Z Framework invariants...
üéØ Testing H1 hypothesis (Opening-Z vs efficiency)...
üìä Testing H2 hypothesis framework (Stacking-Z threshold)...
H1 Test Results:
  Status: INSUFFICIENT_DATA

H2 Framework:
  Status: FRAMEWORK_ESTABLISHED
  Very low threshold: 0.015098
  Framework ready: ‚úÖ

üíª DEMO: CLI Integration
==================================================
Created temporary FASTA file with human sequences
CLI commands demonstrated:

1. Basic guide design with Z-metrics:
   python applications/crispr_cli.py design /var/folders/k_/spz3zlj566sc4qh29g0tk6jh0000gn/T/tmp7jfdp071.fasta --physical-z-metrics -n 2

2. CSV output with Z-metrics:
   python applications/crispr_cli.py design /var/folders/k_/spz3zlj566sc4qh29g0tk6jh0000gn/T/tmp7jfdp071.fasta --physical-z-metrics --format csv

3. Validation suite:
   python applications/crispr_z_metrics_validation.py --test-data

4. Integrated pipeline:
   python applications/crispr_integrated_pipeline.py

üìä DEMO: Validation Suite with Bootstrap CIs
==================================================
Running validation suite with bootstrap confidence intervals...
‚úÖ Validation suite completed successfully!

Key outputs:
- Bootstrap 95% confidence intervals for all Z-metrics
- Guardrail validation (rate clamping)
- H1/H2 hypothesis testing framework
- Effect size calculations (Cohen's d)

üéâ DEMO COMPLETE!
======================================================================
‚úÖ All objectives implemented:
  0) Guardrails: Input validation, Z-form, rate checks ‚úÖ
  1) Four Z-metrics: Opening, stacking, twist, melting ‚úÖ
  2) Œ∏‚Ä≤ geodesic integration at k* = 0.3 ‚úÖ
  3) Validation suite with bootstrap CIs ‚úÖ
  4) Clean CLI + Python API ‚úÖ
  5) H1/H2 hypothesis framework ‚úÖ

Ready for experimental validation and CRISPR efficiency testing!
