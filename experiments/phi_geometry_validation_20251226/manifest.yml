experiment:
  id: phi_geometry_validation_20251226
  name: "φ-Geometry Hypothesis Validation"
  version: "1.0.0"
  date_created: "2025-12-26"
  status: complete

hypothesis:
  statement: >
    φ (golden ratio) geometry in B-DNA structure, as documented in Larsen
    (Symmetry 2021), improves CRISPR guide prediction metrics compared to
    non-φ baselines.
  
  physical_ground_truth:
    - "B-DNA helix length:diameter ≈ 1.6088 (close to φ ≈ 1.618)"
    - "Major/minor backbone spacing ≈ 1.64"
    - "Axial 10-fold symmetry with golden diamond tiling"
  
  reference: "Larsen, M. D. (2021). DNA Structure and the Golden Ratio Revisited. Symmetry."

falsification_criteria:
  criterion_1:
    description: "φ-features show weak correlation with efficiency (|r| < 0.1)"
    threshold: 0.1
    result: "NOT MET (max |r| = 0.147)"
  criterion_2:
    description: "φ-features do NOT outperform baselines in majority of comparisons"
    threshold: 0.5
    result: "NOT MET (φ wins 6/9 comparisons)"
  criterion_3:
    description: "φ-correlations are NOT statistically significant (p > 0.05)"
    threshold: 0.05
    result: "NOT MET (min p = 0.001)"

verdict:
  falsified: false
  conclusion: "HYPOTHESIS NOT FALSIFIED - φ-geometry features show statistically significant predictive signal"

features:
  phi_features:
    - name: phi_phase_score
      description: "Alignment with canonical 10-bp + φ geometry"
      correlation: 0.138
      p_value: 0.001
    - name: phi_curvature_score
      description: "Spectral energy at φ-related modes"
      correlation: 0.147
      p_value: 0.001
    - name: phi_combined_score
      description: "Geometric mean of phase and curvature"
      correlation: 0.107
      p_value: 0.010
  
  baseline_features:
    - name: uniform_phase_score
      description: "Uniform phase baseline (null model)"
      correlation: 0.000
      p_value: 1.000
    - name: random_phase_score
      description: "Random phase assignment baseline"
      correlation: -0.011
      p_value: 0.794
    - name: gc_content
      description: "Simple GC fraction (sequence-only)"
      correlation: 0.709
      p_value: 0.000

data:
  primary_dataset:
    name: "doench2016.csv"
    path: "data/doench2016.csv"
    description: "CRISPR guide sequences with efficiency scores"
    n_sequences: 583
    efficiency_range: [0.38, 0.99]
    sha256: "6c2c38934aa771e74ecb42a7b477e0541694aba805ab5de529e87448416ec892"
    license: "Research use"

reproducibility:
  required_flags:
    - "--seed"
    - "--bootstrap"
    - "--permutation"
  
  environment:
    python_version: "3.12+"
    dependencies: "requirements.txt"
    seed: 42
    bootstrap_samples: 1000
    permutation_samples: 1000

execution:
  quick_validation:
    command: >
      python experiments/phi_geometry_validation_20251226/validate_phi_geometry.py
        --seed 42 --bootstrap 100 --permutation 100
    expected_runtime: "<5 seconds"
  
  full_analysis:
    command: >
      python experiments/phi_geometry_validation_20251226/validate_phi_geometry.py
        --seed 42 --bootstrap 1000 --permutation 1000
        --output experiments/phi_geometry_validation_20251226/results.json
    expected_runtime: "<5 seconds"
    actual_runtime: "2.89 seconds"

outputs:
  primary:
    path: "experiments/phi_geometry_validation_20251226/results.json"
    format: "JSON"
    contents:
      - "Feature correlations with 95% CI"
      - "Permutation test p-values"
      - "Partial correlations controlling for GC"
      - "Falsification verdict"
  
  findings:
    path: "experiments/phi_geometry_validation_20251226/FINDINGS.md"
    format: "Markdown"
    contents:
      - "Executive summary with conclusion first"
      - "Detailed statistical analysis"
      - "Physical constants and implementation"
      - "Limitations and future directions"
  
  report:
    format: "Human-readable terminal output"
    contents:
      - "Executive summary"
      - "Criterion-by-criterion evaluation"
      - "Feature correlation table"

scientific_gates:
  dna_validation: "A/C/G/T/N only (human DNA)"
  statistical_validation:
    - "Pearson r with 95% bootstrap CI (1000 resamples)"
    - "Permutation p-values (1000 permutations)"
    - "Partial correlation controlling for GC%"
  reproducibility: "Fixed seeds, SHA256 checksums"
  no_fabrication: "All φ-constants from empirical B-DNA measurements (Larsen 2021)"

module_created:
  path: "wave_crispr_signal/features/phi_geometry.py"
  exports:
    constants:
      - PHI
      - DNA_LENGTH_DIAMETER_RATIO
      - DNA_MAJOR_MINOR_SEP_RATIO
      - DNA_HELICAL_PERIOD
      - PHI_MODES
    functions:
      - dna_phi_phase
      - dna_phi_phase_vectorized
      - dna_phi_curvature
      - phi_phase_score
      - phi_curvature_score
      - compute_phi_features
    baselines:
      - uniform_phase_score
      - random_phase_score
      - simple_gc_content

repository_policy_compliance:
  structure: true
  naming: true
  documentation: true
  testing: "Validation script with statistical tests"
  dependencies: "No new dependencies required (all in requirements.txt)"
